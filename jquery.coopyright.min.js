/*
 * jQuery Copyright plugin 0.0.1 
 * https://github.com/absentik/copyright
 * 
 * Author: Seleznev Alexander (ABSENT) 
 * Email: absenteg@gmail.com 
 * Website: http://whoisabsent.ru 
 *  
 * Licensed under the MIT license. 
 * http://www.opensource.org/licenses/mit-license.php 
 */

;(function(e,b,c,k){function d(a,b){this.element=a;this._defaults=g;this._name=f;this.options=e.extend({},g,b);this.action="string"===typeof b?b:"default";this.init()}var f="copyright",g={text:"<br>Reference: "+b.location.href,minlength:0};d.prototype.getSelectedText=function(){var a="";b.getSelection?a=b.getSelection().toString():c.selection&&(a=c.selection.createRange().text);return a};d.prototype.setSelectionRange=function(){if(b.getSelection){var a=c.createRange();a.selectNodeContents(this.div);
var d=b.getSelection();d.removeAllRanges();d.addRange(a)}else c.selection&&c.body.createTextRange&&(a=c.body.createTextRange(),a.moveToElementText(this.div),a.select())};d.prototype.removeSelectionRange=function(){b.getSelection?b.getSelection().removeAllRanges():c.selection&&c.selection.empty()};d.prototype.saveSelectionRange=function(){if(b.getSelection){if(sel=b.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(c.selection)return c.selection.createRange();return null};
d.prototype.restoreSelectionRange=function(){this.range?b.getSelection?(sel=b.getSelection(),sel.removeAllRanges(),sel.addRange(this.range)):c.selection&&this.range.select():this.it.removeSelectionRange()};d.prototype.copy=function(){var a=this,d=e("body"),c=a.getSelectedText(),g=a.saveSelectionRange(d[0]);c.length>a.options.minlength&&(c+=a.options.text);var h=e("<div/>",{html:c,style:"width: 1px; height: 1px; overflow: hidden; position: absolute; top: -99999px; left: -99999px; opacity: 0.01"}).appendTo(d);
a.setSelectionRange.call({div:h[0]});b.setTimeout(function(){a.restoreSelectionRange.call({it:a,range:g});h.remove();return e(a.element).trigger(f+"_AfterCopy")},0);return e(a.element).trigger(f+"_BeforeCopy")};d.prototype.remove=function(){e(this.element).off("copy")};d.prototype.start=function(){var a=this;e(a.element).on("copy",function(){a.copy()})};d.prototype.init=function(){switch(this.action){case "remove":return this.remove();default:return this.start()}};e.fn[f]=function(a){return this.each(function(){e.data(this,
"plugin_"+f,new d(this,a))})}})(jQuery,window,document);